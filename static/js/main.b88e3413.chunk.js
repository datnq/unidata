(this["webpackJsonp@datnq/unidata-example"]=this["webpackJsonp@datnq/unidata-example"]||[]).push([[0],{19:function(e,t,a){e.exports=a(25)},24:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),u=a.n(c),o=a(9),l=a(1),i=a(7),s=a(6),d=a.n(s),f=function(e){return"function"===typeof e?e:function(t){return Object.keys(e).every((function(a){return void 0!==t[a]&&e[a]===t[a]}))}},m=Object(n.createContext)({}),b={},p=function(e){var t=e.initialData,a=e.children,c=Object(n.useState)(),u=Object(i.a)(c,2)[1];Object(n.useEffect)((function(){d.a.isEqual(b,t)||u(Object(l.a)({},t))}),[t]);var s=Object(n.useCallback)((function(e){var t=Object(l.a)({},e,{},b);d.a.isEqual(Object.keys(t),Object.keys(b))||(b=Object(l.a)({},e,{},b),u(Object(l.a)({},b)))}),[b]),p=function(e,t){b[e]=Array.isArray(t)?Object(o.a)(t):t,u(Object(l.a)({},b))},v={put:p,add:function(e,t){var a=b[e];Array.isArray(a)?p(e,[].concat(Object(o.a)(a),[t])):p(e,t)},remove:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t&&!a)throw new Error("Filter is required for remove data. Unless you pass force = true");var n=b[e];if(!Array.isArray(n)||a)delete n[e],p(e,n);else{var r=f(t);p(e,n.filter((function(e,t){return!r(e,t)})))}},update:function(e,t,a){if(!t)throw new Error("Filter is required for update data");var n=b[e];if(Array.isArray(n)&&"object"===typeof a){var r=f(t);p(e,n.map((function(e,t){return r(e,t)?(c=a,"object"===typeof(n=e)?Object(l.a)({},n,{},c):c):e;var n,c})))}else p(e,a)}};return r.a.createElement(m.Provider,{value:{data:b,dataSetter:v,initData:s}},a)},v=function(e){return function(t){return function(a){var c=function(e){var t=Object(n.useContext)(m),a=t.dataSetter,r=t.data,c=void 0===r?{}:r,u=t.initData,o=!1,i=d.a.mapValues(e,(function(e,t){return void 0!==c[t]||c[t]===e?c[t]:(o=!0,e)}));return Object(n.useEffect)((function(){o&&"function"===typeof u&&u(Object(l.a)({},c,{},i))}),[o]),[i,a]}(e),u=Object(i.a)(c,2),o=u[0],s=u[1],f=Object(l.a)({},a),b=JSON.stringify(o),p=function(){return r.a.createElement(t,Object.assign({data:o,dataSetter:s},f))};return r.a.useMemo((function(){return r.a.createElement(p,{deps:b})}),[b])}}},j=v({todos:[]})((function(e){var t=e.data;return r.a.createElement("span",null,"Completed: ",t.todos.filter((function(e){return e.completed})).length,"/",t.todos.length)})),O=a(5),E=a(15),y=a(16),h=a(18),g=a(17),k=a(8),C=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(y.a)(a,[{key:"extractFromEvent",value:function(e){var t=e.target,a=t.value,n=t.checked;this.setValue(n?a:null)}}]),a}(O.a),x=function(){return{content:{label:"Todo Content",validators:[{test:Object(k.required)(),errorMessage:"%(label)s is required"},{test:Object(k.minlen)(6),errorMessage:"%(label)s must be longer than 6 characters"}]},completed:{label:"Completed",type:C}}},A=v({todos:[]})((function(e){var t=e.dataSetter,a=Object(n.useRef)(null),c=Object(O.b)(x),u=c.content,o=c.completed,l=function(e){c.extractFromEvent(e)};return r.a.createElement("div",null,r.a.createElement("input",{type:"text",ref:a,onChange:l,name:u.name,value:u.value}),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",name:o.name,checked:"completed"===o.value,value:"completed",onChange:l})," ","Completed"),r.a.createElement("button",{type:"button",onClick:function(e){e.preventDefault(),c.isValid&&(t.add("todos",c.data),c.clearData())}},"Add todo"),r.a.createElement("br",null),u.isValid?null:r.a.createElement("p",null,u.error.message))})),q=v({todos:[]})((function(e){var t=e.data,a=e.dataSetter,n=t.todos,c=function(e){var t=e.target,r=t.checked,c=t.value,u=parseInt(c,10),o=n[u];n[u]=Object(l.a)({},o,{completed:r}),a.put(n)};return r.a.createElement("ol",null,n.map((function(e,t){return r.a.createElement("li",{key:e.content},r.a.createElement("input",{type:"checkbox",checked:e.completed,value:t,onChange:c}),e.completed?r.a.createElement("s",null,e.content):e.content)})))}));a(24);var S,D=(S={},function(e){return function(t){var a=Object(n.useState)(S||{}),c=Object(i.a)(a,2),u=c[0],o=c[1];return r.a.createElement(p,{initialData:u,setData:o},r.a.createElement(e,Object.assign({},t)))}})((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("hr",null),r.a.createElement(j,null),r.a.createElement(q,null))}));u.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.b88e3413.chunk.js.map