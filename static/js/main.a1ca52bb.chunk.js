(this["webpackJsonp@datnq/unidata-example"]=this["webpackJsonp@datnq/unidata-example"]||[]).push([[0],{171:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(55),o=n.n(c),u=n(20),l=n(11),i=n(1),d=n(23),s=n(35),f=n.n(s),b=n(56),m=n.n(b),p=n(36),v=n.n(p),j=n(57),O=n.n(j),E=n(58),y=n.n(E),h=function(e){return"function"===typeof e?e:function(t){return Object.keys(e).every((function(n){return void 0!==t[n]&&e[n]===t[n]}))}},g=function(e){return v()(e,(function(){return m.a.generate()}))},k=Object(a.createContext)({}),C=function(e){var t=e.initialData,n=e.children,c=Object(a.useRef)({data:t,state:g(t)}),o=Object(a.useState)(c.current.state),s=Object(d.a)(o,2)[1],b=function(e){c.current.state=Object(i.a)({},c.current.state,{},g(e)),s(c.current.state)},m=Object(a.useCallback)((function(e){var t=Object(i.a)({},e,{},c.current.data);f()(Object.keys(t),Object.keys(c.current.data))||(c.current.data=Object(i.a)({},e,{},c.current.data),b(t))}),[]),p=function(e,t){f()(c.current.data[e],t)&&c.current.state[e]||(c.current.data[e]=Array.isArray(t)?Object(l.a)(t):t,b(Object(u.a)({},e,t)))};return r.a.createElement(k.Provider,{value:Object(i.a)({},c.current,{initData:m,dataSetter:{put:p,add:function(e,t){var n=c.current.data[e];Array.isArray(n)?p(e,[].concat(Object(l.a)(n),[t])):p(e,t)},remove:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t&&!n)throw new Error("Filter is required for remove data. Unless you pass force = true");var a=c.current.data[e];if(!Array.isArray(a)||n)delete a[e],p(e,a);else{var r=h(t);p(e,a.filter((function(e,t){return!r(e,t)})))}},update:function(e,t,n){if(!t)throw new Error("Filter is required for update data");var a=c.current.data[e];if(Array.isArray(a)&&"object"===typeof n){var r=h(t);p(e,a.map((function(e,t){return r(e,t)?(c=n,"object"===typeof(a=e)?Object(i.a)({},a,{},c):c):e;var a,c})))}else p(e,n)}}})},n)},x=function(e){return function(t){return function(n){var c=function(e){var t=Object(a.useContext)(k),n=t.dataSetter,r=t.state,c=void 0===r?{}:r,o=t.data,u=void 0===o?{}:o,l=t.initData,d=!1,s=v()(e,(function(e,t){return void 0!==u[t]||u[t]===e?u[t]:(d=!0,e)})),f=y()(c,Object.keys(e));return Object(a.useEffect)((function(){d&&"function"===typeof l&&l(Object(i.a)({},u,{},s))}),[d]),[s,n,f]}(e||{}),o=Object(d.a)(c,3),u=o[0],l=o[1],s=o[2],f=Object(i.a)({},n),b=O()(s).join("-"),m=function(){return r.a.createElement(t,Object.assign({data:u,dataSetter:l},f))};return r.a.useMemo((function(){return r.a.createElement(m,{deps:b})}),[b])}}},A=x({todos:[]})((function(e){var t=e.data;return console.log("Rendered Counter"),r.a.createElement("span",null,"Completed: ",t.todos.filter((function(e){return e.completed})).length,"/",t.todos.length)})),D=n(22),S=n(59),q=n(60),w=n(62),F=n(61),R=n(37),M=function(e){Object(w.a)(n,e);var t=Object(F.a)(n);function n(){return Object(S.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"extractFromEvent",value:function(e){var t=e.target,n=t.value,a=t.checked;this.setValue(a?n:null)}}]),n}(D.a),T=function(){return{content:{label:"Todo Content",validators:[{test:Object(R.required)(),errorMessage:"%(label)s is required"},{test:Object(R.minlen)(6),errorMessage:"%(label)s must be longer than 6 characters"}]},completed:{label:"Completed",type:M}}},V=x()((function(e){var t=e.dataSetter,n=Object(a.useRef)(null),c=Object(D.b)(T),o=c.content,u=c.completed,l=function(e){c.extractFromEvent(e)};return console.log("Rendered Add Todo"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",ref:n,onChange:l,name:o.name,value:o.value}),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",name:u.name,checked:"completed"===u.value,value:"completed",onChange:l})," ","Completed"),r.a.createElement("button",{type:"button",onClick:function(e){e.preventDefault(),c.isValid&&(t.add("todos",c.data),c.clearData())}},"Add todo"),r.a.createElement("br",null),o.isValid?null:r.a.createElement("p",null,o.error.message))})),I=x({todos:[]})((function(e){var t=e.data,n=e.dataSetter,a=t.todos,c=function(e){var t=e.target,r=t.checked,c=t.value,o=Object(l.a)(a),u=parseInt(c,10),d=a[u];o[u]=Object(i.a)({},d,{completed:r}),n.put("todos",o)};return console.log("Rendered Todo list"),r.a.createElement("ol",null,a.map((function(e,t){return r.a.createElement("li",{key:e.content},r.a.createElement("input",{type:"checkbox",checked:e.completed,value:t,onChange:c}),e.completed?r.a.createElement("s",null,e.content):e.content)})))}));n(171);var J,B=(J={},function(e){return function(t){var n=Object(a.useState)(J||{}),c=Object(d.a)(n,2),o=c[0],u=c[1];return r.a.createElement(C,{initialData:o,setData:u},r.a.createElement(e,Object.assign({},t)))}})((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null),r.a.createElement("hr",null),r.a.createElement(A,null),r.a.createElement(I,null))}));o.a.render(r.a.createElement(B,null),document.getElementById("root"))},63:function(e,t,n){e.exports=n(172)}},[[63,1,2]]]);
//# sourceMappingURL=main.a1ca52bb.chunk.js.map