{"version":3,"sources":["../../es/index.js","counter.js","model/todos.js","addTodo.js","todoList.js","index.js","App.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","_extends","assign","target","i","arguments","length","source","hasOwnProperty","call","apply","this","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","_objectSpread2","forEach","getOwnPropertyDescriptors","defineProperties","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","_iterableToArrayLimit","_unsupportedIterableToArray","TypeError","_nonIterableRest","_toConsumableArray","_arrayLikeToArray","_arrayWithoutHoles","iter","from","_iterableToArray","_nonIterableSpread","o","minLen","n","toString","slice","name","test","len","arr2","getFilterFunction","item","every","k","UnidataContext","createContext","unidata","UnidataProvider","_ref","initialData","children","forceUpdate","useState","useEffect","_","isEqual","initData","useCallback","newData","put","dataSetter","add","d","concat","remove","forced","Error","filterFn","index","update","map","v","React","createElement","Provider","data","subscribe","subscribed","WrappedComponent","props","_useUnidata2","_useContext","useContext","changed","subscribedData","mapValues","useUnidata","parentProps","deps","JSON","stringify","SubscribedComponent","useMemo","todos","t","completed","CheckboxField","e","checked","setValue","Field","content","label","validators","required","errorMessage","minlen","type","inputRef","useRef","todo","useModel","todoModel","change","extractFromEvent","ref","onChange","onClick","preventDefault","isValid","clearData","error","message","parseInt","updated","id","AppContainer","App","_useState4","setData","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.45066b81.chunk.js","sourcesContent":["import _ from 'lodash';\nimport React, { createContext, useState, useEffect, useCallback, useContext } from 'react';\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar getFilterFunction = function getFilterFunction(filter) {\n  return typeof filter === 'function' ? filter : function (item) {\n    return Object.keys(filter).every(function (k) {\n      return item[k] !== undefined && filter[k] === item[k];\n    });\n  };\n};\n\nvar UnidataContext = createContext(null);\nvar unidata = {};\nvar UnidataProvider = function UnidataProvider(_ref) {\n  var initialData = _ref.initialData,\n      children = _ref.children;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      forceUpdate = _useState2[1];\n\n  useEffect(function () {\n    if (!_.isEqual(unidata, initialData)) forceUpdate(_objectSpread2({}, initialData));\n  }, [initialData]);\n  var initData = useCallback(function (value) {\n    var newData = _objectSpread2({}, value, {}, unidata);\n\n    if (!_.isEqual(Object.keys(newData), Object.keys(unidata))) {\n      unidata = _objectSpread2({}, value, {}, unidata);\n      forceUpdate(_objectSpread2({}, unidata));\n    }\n  }, [unidata]);\n\n  var put = function put(name, value) {\n    unidata[name] = Array.isArray(value) ? _toConsumableArray(value) : value;\n    forceUpdate(_objectSpread2({}, unidata));\n  };\n\n  var dataSetter = {\n    put: put,\n    add: function add(name, value) {\n      var d = unidata[name];\n\n      if (!Array.isArray(d)) {\n        put(name, value);\n      } else {\n        put(name, [].concat(_toConsumableArray(d), [value]));\n      }\n    },\n    remove: function remove(name, filter) {\n      var forced = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (!filter && !forced) {\n        throw new Error('Filter is required for remove data. Unless you pass force = true');\n      }\n\n      var d = unidata[name];\n\n      if (!Array.isArray(d) || forced) {\n        delete d[name];\n        put(name, d);\n      } else {\n        var filterFn = getFilterFunction(filter);\n        put(name, d.filter(function (item, index) {\n          return !filterFn(item, index);\n        }));\n      }\n    },\n    update: function update(name, filter, value) {\n      if (!filter) throw new Error('Filter is required for update data');\n      var d = unidata[name];\n\n      if (!Array.isArray(d) || _typeof(value) !== 'object') {\n        put(name, value);\n      } else {\n        var filterFn = getFilterFunction(filter);\n\n        var doUpdate = function doUpdate(i, v) {\n          return _typeof(i) === 'object' ? _objectSpread2({}, i, {}, v) : v;\n        };\n\n        put(name, d.map(function (item, index) {\n          return filterFn(item, index) ? doUpdate(item, value) : item;\n        }));\n      }\n    }\n  };\n  return /*#__PURE__*/React.createElement(UnidataContext.Provider, {\n    value: {\n      data: unidata,\n      dataSetter: dataSetter,\n      initData: initData\n    }\n  }, children);\n};\nvar withUnidata = function withUnidata(initialData) {\n  return function (App) {\n    return function (props) {\n      var _useState3 = useState(initialData || {}),\n          _useState4 = _slicedToArray(_useState3, 2),\n          data = _useState4[0],\n          setData = _useState4[1];\n\n      return /*#__PURE__*/React.createElement(UnidataProvider, {\n        initialData: data,\n        setData: setData\n      }, /*#__PURE__*/React.createElement(App, props));\n    };\n  };\n};\n\nvar useUnidata = function useUnidata(subscribed) {\n  var _useContext = useContext(UnidataContext),\n      dataSetter = _useContext.dataSetter,\n      data = _useContext.data,\n      initData = _useContext.initData;\n\n  var changed = false;\n\n  var subscribedData = _.mapValues(subscribed, function (v, k) {\n    if (data[k] !== undefined || data[k] === v) return data[k];\n    changed = true;\n    return v;\n  });\n\n  useEffect(function () {\n    if (changed) {\n      initData(_objectSpread2({}, data, {}, subscribedData));\n    }\n  }, [changed]);\n  return [subscribedData, dataSetter];\n};\nvar subscribe = function subscribe(subscribed) {\n  return function (WrappedComponent) {\n    return function (props) {\n      var _useUnidata = useUnidata(subscribed),\n          _useUnidata2 = _slicedToArray(_useUnidata, 2),\n          data = _useUnidata2[0],\n          dataSetter = _useUnidata2[1];\n\n      var parentProps = _objectSpread2({}, props);\n\n      var deps = JSON.stringify(data);\n\n      var SubscribedComponent = function SubscribedComponent() {\n        return /*#__PURE__*/React.createElement(WrappedComponent, _extends({\n          data: data,\n          dataSetter: dataSetter\n        }, parentProps));\n      };\n\n      return React.useMemo(function () {\n        return /*#__PURE__*/React.createElement(SubscribedComponent, {\n          deps: deps\n        });\n      }, [deps]);\n    };\n  };\n};\n\nexport { UnidataContext, UnidataProvider, subscribe, useUnidata, withUnidata };\n","import React from 'react'\nimport { subscribe } from '@datnq/unidata'\n\nconst Counter = ({ data }) => {\n  return (\n    <span>\n      Completed: {data.todos.filter(t => t.completed).length}/\n      {data.todos.length}\n    </span>\n  )\n}\n\nexport default subscribe({\n  todos: [],\n})(Counter)\n","import { required, minlen } from 'react-hooks-usemodel/dist/utils/validators'\nimport { Field } from 'react-hooks-usemodel'\n\nclass CheckboxField extends Field {\n  extractFromEvent(e) {\n    const {\n      target: { value, checked }\n    } = e;\n    this.setValue(checked ? value : null);\n  }\n}\n\nexport default () => {\n  return {\n    content: {\n      label: 'Todo Content',\n      validators: [\n        { test: required(), errorMessage: '%(label)s is required' },\n        { test: minlen(6), errorMessage: '%(label)s must be longer than 6 characters' },\n      ]\n    },\n    completed: {\n      label: 'Completed',\n      type: CheckboxField\n    }\n  }\n}","/* eslint-disable jsx-a11y/label-has-associated-control */\nimport React, { useRef } from 'react'\nimport { useModel } from 'react-hooks-usemodel'\nimport { subscribe } from '@datnq/unidata'\nimport todoModel from './model/todos'\n\nconst AddTodo = ({ dataSetter }) => {\n  const inputRef = useRef(null)\n  const todo = useModel(todoModel)\n  const { content, completed } = todo\n\n  const change = e => {\n    todo.extractFromEvent(e)\n  }\n\n  const addtodo = e => {\n    e.preventDefault()\n    if (!todo.isValid) return\n    dataSetter.add('todos', todo.data)\n    todo.clearData()\n  }\n\n  return (\n    <div>\n      <input\n        type=\"text\"\n        ref={inputRef}\n        onChange={change}\n        name={content.name}\n        value={content.value}\n      />\n      <label>\n        <input\n          type=\"checkbox\"\n          name={completed.name}\n          checked={completed.value === 'completed'}\n          value=\"completed\"\n          onChange={change}\n        />{' '}\n        Completed\n      </label>\n      <button type=\"button\" onClick={addtodo}>\n        Add todo\n      </button>\n      <br />\n      {content.isValid ? null : <p>{content.error.message}</p>}\n    </div>\n  )\n}\nexport default subscribe({\n  todos: [],\n})(AddTodo)\n","import React from 'react'\nimport { subscribe } from '@datnq/unidata'\n\nconst TodoList = ({ data, dataSetter }) => {\n  const { todos } = data\n\n  const change = e => {\n    const {\n      target: { checked, value },\n    } = e\n    const index = parseInt(value, 10)\n    const updated = todos[index]\n    todos[index] = { ...updated, completed: checked }\n    dataSetter.put(todos)\n  }\n\n  return (\n    <ol>\n      {todos.map((todo, id) => (\n        <li key={todo.content}>\n          <input\n            type=\"checkbox\"\n            checked={todo.completed}\n            value={id}\n            onChange={change}\n          />\n          {todo.completed ? <s>{todo.content}</s> : todo.content}\n        </li>\n      ))}\n    </ol>\n  )\n}\nexport default subscribe({\n  todos: [],\n})(TodoList)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { withUnidata } from '@datnq/unidata'\n\nimport App from './App'\nimport './index.css'\n\nconst data = {}\nconst AppContainer = withUnidata(data)(App)\n\nReactDOM.render(<AppContainer />, document.getElementById('root'))\n","import React from 'react'\nimport Counter from './counter'\nimport AddTodo from './addTodo'\nimport TodoList from './todoList'\n\nexport default function App() {\n  return (\n    <>\n      <AddTodo />\n      <hr />\n      <Counter />\n      <TodoList />\n    </>\n  )\n}\n"],"sourceRoot":""}