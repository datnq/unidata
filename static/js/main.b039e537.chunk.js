(this["webpackJsonp@datnq/unidata-example"]=this["webpackJsonp@datnq/unidata-example"]||[]).push([[0],{176:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(55),o=a.n(l),r=a(36),s=a(1),i=a(34),u=a.n(i),d=a(56),m=a.n(d),p=a(57),b=a.n(p),h=a(58),g=a.n(h);const E=e=>u()(e,()=>m.a.generate()),v=(e,t)=>"".concat(e).concat(t.displayName||t.name||"Component"),j=e=>({data:e,state:E(e)}),f=(e,t)=>((e,t)=>({data:Object(s.a)(Object(s.a)({},e.data),t),state:Object(s.a)(Object(s.a)({},e.state),E(t))}))(e,t(e.data)),O=Object(n.createContext)({store:{data:{},state:{}},dispatch:()=>{}});O.displayName="UnidataContext";const y=({initialData:e,children:t})=>{const a=Object(n.useReducer)(f,e,j),l=Object(r.a)(a,2),o=l[0],s=l[1];return c.a.createElement(O.Provider,{value:{store:o,dispatch:s}},t)},k=e=>t=>{const a=a=>{const l=((e={})=>{const t=Object(n.useContext)(O),a=t.dispatch,c=t.store,l=c.data,o=c.state,r={},s=u()(e,(e,t)=>void 0!==l[t]||l[t]===e?l[t]:(r[t]=e,e)),i=Object.keys(r).length>0,d=g()(b()(o,Object.keys(e))).join("-");return Object(n.useEffect)(()=>{i&&a(()=>r)},[i,a,r]),[s,a,d]})(e||{}),o=Object(r.a)(l,3),i=o[0],d=o[1],m=o[2],p=Object(s.a)({},a),h=()=>c.a.createElement(t,Object.assign({data:i,dispatch:d},p));return h.displayName=v("UnidataSubscribed",t),c.a.useMemo(()=>c.a.createElement(h,{state:m}),[m])};return a.displayName=v("UnidataMemoized",t),a};var C=a(19),x=a(20),w=a(23),D=a(22),R=a(59),q=a.n(R);const M=e=>t=>e(({logs:e=[]})=>({logs:[...e,{content:t,id:q.a.generate(),time:new Date}]}));var T=k({logs:[]})(({data:e})=>{const t=e.logs,a=[];let n;return(void 0===t?[]:t).forEach((e,t)=>{if(0===t)return a.push(Object(s.a)(Object(s.a)({},e),{},{count:1})),void(n=e.content);const c=e.content;n&&c===n?(a[a.length-1].count+=1,a[a.length-1].time=new Date):(a.push(Object(s.a)(Object(s.a)({},e),{},{count:1})),n=c)}),a&&c.a.createElement("div",null,a.map(e=>c.a.createElement("p",{key:e.id},c.a.createElement("code",null,e.time.toLocaleTimeString())," \u2013 ",e.content,e.count>1?" (".concat(e.count,")"):"")))}),F=function(e){Object(w.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(C.a)(this,a),(n=t.call(this,e)).log=M(n.props.dispatch),n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.log&&this.log("Rendering Todo Counter")}},{key:"render",value:function(){var e=this.props.data;return c.a.createElement("span",null,"Completed: ",e.todos.filter((function(e){return e.completed})).length,"/",e.todos.length)}}]),a}(c.a.PureComponent),I=k({todos:[]})(F),N=a(21),U=a(35),S=function(e){Object(w.a)(a,e);var t=Object(D.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(x.a)(a,[{key:"extractFromEvent",value:function(e){var t=e.target,a=t.value,n=t.checked;this.setValue(n?a:null)}}]),a}(N.a),V=function(){return{content:{label:"Todo Content",validators:[{test:Object(U.required)(),errorMessage:"%(label)s is required"},{test:Object(U.minlen)(6),errorMessage:"%(label)s must be longer than 6 characters"}]},completed:{label:"Completed",type:S}}};var _=k()(({dispatch:e})=>{const t=M(e),a=Object(N.b)(V),l=a.content,o=a.completed,r=e=>{a.extractFromEvent(e)};return Object(n.useEffect)(()=>{t("Rendering Add Todo")}),c.a.createElement("div",null,c.a.createElement("input",{type:"text",onChange:r,name:l.name,value:l.value}),c.a.createElement("label",null,c.a.createElement("input",{type:"checkbox",name:o.name,checked:"completed"===o.value,value:"completed",onChange:r})," ","Completed"),c.a.createElement("button",{type:"button",onClick:t=>{if(t.preventDefault(),!a.isValid)return;const n=a.data;e(({todos:e})=>({todos:[...e,n]})),a.clearData()}},"Add todo"),c.a.createElement("br",null),l.isValid?null:c.a.createElement("p",null,l.error.message))});var z=k({todos:[]})(({data:e,dispatch:t})=>{const a=e.todos,l=M(t),o=e=>{const a=e.target,n=a.checked,c=a.value;t(({todos:e,logs:t})=>(e[parseInt(c,10)].completed=n,{todos:e}))};return Object(n.useEffect)(()=>{l("Rendering Todo list")}),c.a.createElement("ol",null,a.map((e,t)=>c.a.createElement("li",{key:e.content},c.a.createElement("input",{type:"checkbox",checked:e.completed,value:t,onChange:o}),e.completed?c.a.createElement("s",null,e.content):e.content)))}),A=k({counter:0})(({data:e,dispatch:t})=>{const a=M(t),l=Object(n.useCallback)(()=>{t(({counter:e})=>({counter:e+1}))},[t]);return Object(n.useEffect)(()=>{a("Rendering Unrelated counter")}),c.a.createElement("p",null,c.a.createElement("button",{type:"button",onClick:l},"+ Increase")," "+e.counter)});function G(){var e={padding:"20px",flexGrow:1,width:"50%",position:"relative"};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{display:"flex",height:"100vh",alignItems:"stretch"}},c.a.createElement("div",{style:e},c.a.createElement("a",{href:"https://github.com/datnq/unidata",style:{position:"absolute",right:0,top:0}},c.a.createElement("img",{width:"149",height:"149",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149",alt:"Fork me on GitHub","data-recalc-dims":"1"})),c.a.createElement(_,null),c.a.createElement("hr",null),c.a.createElement(I,null),c.a.createElement(A,null),c.a.createElement(z,null)),c.a.createElement("div",{style:Object(s.a)({},e,{color:"#fff",backgroundColor:"#333",overflowY:"scroll",boxShadow:"inset 0 0 20px rgba(0,0,0,.4)"})},c.a.createElement("h2",null,"Rendering logger"),c.a.createElement(T,null))))}a(176);o.a.render(c.a.createElement(y,{initialData:{}},c.a.createElement(G,null)),document.getElementById("root"))},60:function(e,t,a){e.exports=a(177)}},[[60,1,2]]]);
//# sourceMappingURL=main.b039e537.chunk.js.map