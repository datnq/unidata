(this["webpackJsonp@datnq/unidata-example"]=this["webpackJsonp@datnq/unidata-example"]||[]).push([[0],{176:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(54),c=n.n(o),l=n(34),u=n.n(l),i=n(35),d=n.n(i),s=n(55),p=n.n(s),f=n(56),m=n.n(f),b=n(57),h=n.n(b);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var y=function(e){return d()(e,(function(){return p.a.generate()}))},g=function(e,t){return""+e+(t.displayName||t.name||"Component")},E=function(e){return{data:e,state:y(e)}},j=function(e,t){return{data:v({},e.data,{},t),state:v({},e.state,{},y(t))}},O=function(e,t){var n=t.type,a=t.payload,r=a.name,o=a.value,c=e.data[r],l=function(e){return"function"===typeof e?e:function(t){return Object.keys(e).every((function(n){return void 0!==t[n]&&e[n]===t[n]}))}}(a.filter),i=function(t,n){var a;return u()(e.data[t],n)&&e.state[t]?e:j(e,((a={})[t]=Array.isArray(n)?[].concat(n):n,a))};switch(n){case"init":var d=v({},a.data,{},e.data);return u()(Object.keys(d),Object.keys(e.data))?e:j(e,d);case"put":return i(r,o);case"add":return Array.isArray(c)?i(r,[].concat(c,[o])):i(r,o);case"update":if(!a.filter)throw new Error("Filter is required for update data");if(Array.isArray(c)&&"object"===typeof o){return i(r,c.map((function(e,t){return l(e,t)?(a=o,"object"===typeof(n=e)?v({},n,{},a):a):e;var n,a})))}return i(r,o);case"remove":if(!a.filter&&!a.forced)throw new Error("Filter is required for remove data. Unless you pass force = true");return!Array.isArray(c)||a.forced?(delete c[r],i(r,c)):i(r,c.filter((function(e,t){return!l(e,t)})));default:throw new Error}},k=Object(a.createContext)({store:{data:{},state:{}},dispatch:function(){}});k.displayName="UnidataContext";var C=function(e){var t=e.initialData,n=e.children,o=Object(a.useReducer)(O,t,E),c=o[0],l=o[1];return r.a.createElement(k.Provider,{value:{store:c,dispatch:l}},n)},w=function(e){return function(t){var n=function(n){var o=function(e){void 0===e&&(e={});var t=Object(a.useContext)(k),n=t.dispatch,r=t.store,o=r.data,c=r.state,l={},u=d()(e,(function(e,t){return void 0!==o[t]||o[t]===e?o[t]:(l[t]=e,e)})),i=Object.keys(l).length>0,s=h()(m()(c,Object.keys(e))).join("-");return Object(a.useEffect)((function(){i&&n({type:"init",payload:{data:l}})}),[i,n,l]),[u,n,s]}(e||{}),c=o[0],l=o[1],u=o[2],i=v({},n),s=function(){return r.a.createElement(t,Object.assign({data:c,dispatch:l},i))};return s.displayName=g("UnidataSubscribed",t),r.a.useMemo((function(){return r.a.createElement(s,{state:u})}),[u])};return n.displayName=g("UnidataMemoized",t),n}},x=n(59),A=n(18),q=n(19),R=n(22),F=n(21),D=n(58),M=n.n(D),U=function(e){return function(t){e({type:"add",payload:{name:"logs",value:{content:t,id:M.a.generate()}}})}},I=w({logs:[]})((function(e){var t=e.data.logs;return t&&r.a.createElement("ol",null,t.map((function(e){return r.a.createElement("li",{key:e.id},e.content)})))})),N=function(e){Object(R.a)(n,e);var t=Object(F.a)(n);function n(e){var a;return Object(A.a)(this,n),(a=t.call(this,e)).log=U(a.props.dispatch),a}return Object(q.a)(n,[{key:"componentDidMount",value:function(){this.log&&this.log("Rendering Todo Counter")}},{key:"render",value:function(){var e=this.props.data;return r.a.createElement("span",null,"Completed: ",e.todos.filter((function(e){return e.completed})).length,"/",e.todos.length)}}]),n}(r.a.PureComponent),T=w({todos:[]})(N),P=n(20),V=n(36),_=function(e){Object(R.a)(n,e);var t=Object(F.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"extractFromEvent",value:function(e){var t=e.target,n=t.value,a=t.checked;this.setValue(a?n:null)}}]),n}(P.a),z=function(){return{content:{label:"Todo Content",validators:[{test:Object(V.required)(),errorMessage:"%(label)s is required"},{test:Object(V.minlen)(6),errorMessage:"%(label)s must be longer than 6 characters"}]},completed:{label:"Completed",type:_}}},G=w()((function(e){var t=e.dispatch,n=U(t),o=Object(a.useRef)(null),c=Object(P.b)(z),l=c.content,u=c.completed,i=function(e){c.extractFromEvent(e)};return Object(a.useEffect)((function(){n("Rendering Add Todo")})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",ref:o,onChange:i,name:l.name,value:l.value}),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",name:u.name,checked:"completed"===u.value,value:"completed",onChange:i})," ","Completed"),r.a.createElement("button",{type:"button",onClick:function(e){e.preventDefault(),c.isValid&&(t({type:"add",payload:{name:"todos",value:c.data}}),c.clearData())}},"Add todo"),r.a.createElement("br",null),l.isValid?null:r.a.createElement("p",null,l.error.message))})),J=w({todos:[]})((function(e){var t=e.data,n=e.dispatch,o=t.todos,c=U(n),l=function(e){var t=e.target,a=t.checked,r=t.value;n({type:"update",payload:{name:"todos",value:{completed:a},filter:function(e,t){return t===parseInt(r,10)}}})};return Object(a.useEffect)((function(){c("Rendering Todo list")})),r.a.createElement("ol",null,o.map((function(e,t){return r.a.createElement("li",{key:e.content},r.a.createElement("input",{type:"checkbox",checked:e.completed,value:t,onChange:l}),e.completed?r.a.createElement("s",null,e.content):e.content)})))})),S=w({counter:0})((function(e){var t=e.data,n=e.dispatch,o=U(n),c=Object(a.useCallback)((function(){n({type:"put",payload:{name:"counter",value:t.counter+1}})}),[t.counter,n]);return Object(a.useEffect)((function(){o("Rendering Unrelated counter")})),r.a.createElement("p",null,r.a.createElement("button",{type:"button",onClick:c},"+ Increase")," "+t.counter)}));function B(){var e={padding:"20px",flexGrow:1,width:"50%",position:"relative"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",height:"100vh",alignItems:"stretch"}},r.a.createElement("div",{style:e},r.a.createElement("a",{href:"https://github.com/datnq/unidata",style:{position:"absolute",right:0,top:0}},r.a.createElement("img",{width:"149",height:"149",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149",alt:"Fork me on GitHub","data-recalc-dims":"1"})),r.a.createElement(G,null),r.a.createElement("hr",null),r.a.createElement(T,null),r.a.createElement(S,null),r.a.createElement(J,null)),r.a.createElement("div",{style:Object(x.a)({},e,{color:"#fff",backgroundColor:"#333",overflowY:"scroll",boxShadow:"inset 0 0 20px rgba(0,0,0,.4)"})},r.a.createElement("h2",null,"Rendering logger"),r.a.createElement(I,null))))}n(176);c.a.render(r.a.createElement(C,{initialData:{logs:[]}},r.a.createElement(B,null)),document.getElementById("root"))},60:function(e,t,n){e.exports=n(177)}},[[60,1,2]]]);
//# sourceMappingURL=main.e781d07e.chunk.js.map