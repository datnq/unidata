(this["webpackJsonp@datnq/unidata-example"]=this["webpackJsonp@datnq/unidata-example"]||[]).push([[0],{177:function(e,t,n){},178:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(55),c=n.n(o),l=n(35),u=n.n(l),i=n(36),s=n.n(i),d=n(56),f=n.n(d),p=n(57),m=n.n(p),h=n(58),b=n.n(h);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var y=function(e){return s()(e,(function(){return f.a.generate()}))},g=function(e,t){return""+e+(t.displayName||t.name||"Component")},E=function(e){return{data:e,state:y(e)}},j=function(e,t){return{data:v({},e.data,{},t),state:v({},e.state,{},y(t))}},O=function(e,t){var n=t.type,a=t.payload,r=a.name,o=a.value,c=e.data[r],l=function(e){return"function"===typeof e?e:function(t){return Object.keys(e).every((function(n){return void 0!==t[n]&&e[n]===t[n]}))}}(a.filter),i=function(t,n){var a;return u()(e.data[t],n)&&e.state[t]?e:j(e,((a={})[t]=Array.isArray(n)?[].concat(n):n,a))};switch(n){case"init":var s=v({},a.data,{},e.data);return u()(Object.keys(s),Object.keys(e.data))?e:j(e,s);case"put":return i(r,o);case"add":return Array.isArray(c)?i(r,[].concat(c,[o])):i(r,o);case"update":if(!a.filter)throw new Error("Filter is required for update data");if(Array.isArray(c)&&"object"===typeof o){return i(r,c.map((function(e,t){return l(e,t)?(a=o,"object"===typeof(n=e)?v({},n,{},a):a):e;var n,a})))}return i(r,o);case"remove":if(!a.filter&&!a.forced)throw new Error("Filter is required for remove data. Unless you pass force = true");return!Array.isArray(c)||a.forced?(delete c[r],i(r,c)):i(r,c.filter((function(e,t){return!l(e,t)})));default:throw new Error}},k=Object(a.createContext)({store:{data:{},state:{}},dispatch:function(){}});k.displayName="UnidataContext";var C=function(e){var t=e.initialData,n=e.children,o=Object(a.useReducer)(O,t,E),c=o[0],l=o[1];return r.a.createElement(k.Provider,{value:{store:c,dispatch:l}},n)},w=function(e){return function(t){var n=function(n){var o=function(e){void 0===e&&(e={});var t=Object(a.useContext)(k),n=t.dispatch,r=t.store,o=r.data,c=r.state,l={},u=s()(e,(function(e,t){return void 0!==o[t]||o[t]===e?o[t]:(l[t]=e,e)})),i=Object.keys(l).length>0,d=b()(m()(c,Object.keys(e))).join("-");return Object(a.useEffect)((function(){i&&n({type:"init",payload:{data:l}})}),[i,n,l]),[u,n,d]}(e||{}),c=o[0],l=o[1],u=o[2],i=v({},n),d=function(){return r.a.createElement(t,Object.assign({data:c,dispatch:l},i))};return d.displayName=g("UnidataSubscribed",t),r.a.useMemo((function(){return r.a.createElement(d,{state:u})}),[u])};return n.displayName=g("UnidataMemoized",t),n}},x=n(22),A=n(18),q=n(19),R=n(23),F=n(21),U=n(59),D=n.n(U),I=function(e){return function(t){e.add("logs",{content:t,id:D.a.generate()})}},M=w({logs:[]})((function(e){var t=e.data.logs;return t&&r.a.createElement("ol",null,t.map((function(e){return r.a.createElement("li",{key:e.id},e.content)})))})),N=function(e){Object(R.a)(n,e);var t=Object(F.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"componentDidUpdate",value:function(){this.log=I(this.props.dispatcher)}},{key:"render",value:function(){this.log&&this.log("Rendering Todo Counter");var e=this.props.data;return r.a.createElement("span",null,"Completed: ",e.todos.filter((function(e){return e.completed})).length,"/",e.todos.length)}}]),n}(r.a.PureComponent),T=w({todos:[]})(N),z=n(20),P=n(37),V=function(e){Object(R.a)(n,e);var t=Object(F.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"extractFromEvent",value:function(e){var t=e.target,n=t.value,a=t.checked;this.setValue(a?n:null)}}]),n}(z.a),_=function(){return{content:{label:"Todo Content",validators:[{test:Object(P.required)(),errorMessage:"%(label)s is required"},{test:Object(P.minlen)(6),errorMessage:"%(label)s must be longer than 6 characters"}]},completed:{label:"Completed",type:V}}},G=w()((function(e){var t=e.dispatcher,n=I(t),o=Object(a.useRef)(null),c=Object(z.b)(_),l=c.content,u=c.completed,i=function(e){c.extractFromEvent(e)};return Object(a.useEffect)((function(){n("Rendering Add Todo")})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",ref:o,onChange:i,name:l.name,value:l.value}),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",name:u.name,checked:"completed"===u.value,value:"completed",onChange:i})," ","Completed"),r.a.createElement("button",{type:"button",onClick:function(e){e.preventDefault(),c.isValid&&(t.add("todos",c.data),c.clearData())}},"Add todo"),r.a.createElement("br",null),l.isValid?null:r.a.createElement("p",null,l.error.message))})),J=n(60),S=w({todos:[]})((function(e){var t=e.data,n=e.dispatcher,o=t.todos,c=I(n),l=function(e){var t=e.target,a=t.checked,r=t.value,c=Object(J.a)(o),l=parseInt(r,10),u=o[l];c[l]=Object(x.a)({},u,{completed:a}),n.put("todos",c)};return Object(a.useEffect)((function(){c("Rendering Todo list")})),r.a.createElement("ol",null,o.map((function(e,t){return r.a.createElement("li",{key:e.content},r.a.createElement("input",{type:"checkbox",checked:e.completed,value:t,onChange:l}),e.completed?r.a.createElement("s",null,e.content):e.content)})))})),B=w({counter:0})((function(e){var t=e.data,n=e.dispatcher,o=I(n),c=Object(a.useCallback)((function(){n.put("counter",t.counter+1)}),[t.counter,n]);return Object(a.useEffect)((function(){o("Rendering Unrelated counter")})),r.a.createElement("p",null,t.counter," ",r.a.createElement("button",{type:"button",onClick:c},"+ Increase"))}));function H(){var e={padding:"20px",flexGrow:1,width:"50%",position:"relative"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",height:"100vh",alignItems:"stretch"}},r.a.createElement("div",{style:e},r.a.createElement("a",{href:"https://github.com/datnq/unidata",style:{position:"absolute",right:0,top:0}},r.a.createElement("img",{width:"149",height:"149",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149",class:"attachment-full size-full",alt:"Fork me on GitHub","data-recalc-dims":"1"})),r.a.createElement(G,null),r.a.createElement("hr",null),r.a.createElement(T,null),r.a.createElement(B,null),r.a.createElement(S,null)),r.a.createElement("div",{style:Object(x.a)({},e,{color:"#fff",backgroundColor:"#333",overflowY:"scroll",boxShadow:"inset 0 0 20px rgba(0,0,0,.4)"})},r.a.createElement("h2",null,"Rendering logger"),r.a.createElement(M,null))))}n(177);c.a.render(r.a.createElement(C,{initialData:{logs:[]}},r.a.createElement(H,null)),document.getElementById("root"))},61:function(e,t,n){e.exports=n(178)}},[[61,1,2]]]);
//# sourceMappingURL=main.b3600694.chunk.js.map