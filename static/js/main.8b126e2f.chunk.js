(this["webpackJsonp@datnq/unidata-example"]=this["webpackJsonp@datnq/unidata-example"]||[]).push([[0],{177:function(e,t,n){},178:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(55),c=n.n(o),u=n(35),l=n.n(u),i=n(36),d=n.n(i),s=n(56),f=n.n(s),p=n(57),m=n.n(p),b=n(58),h=n.n(b);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var y=function(e){return"function"===typeof e?e:function(t){return Object.keys(e).every((function(n){return void 0!==t[n]&&e[n]===t[n]}))}},g=function(e){return d()(e,(function(){return f.a.generate()}))},E=function(e,t){return""+e+(t.displayName||t.name||"Component")},j=function(e){return{data:e,state:g(e)}},O=function(e,t){return{data:v({},e.data,{},t),state:v({},e.state,{},g(t))}},k=function(e,t){var n=t.type,a=t.name,r=t.value,o=t.filter,c=t.forced,u=t.data,i=e.data[a],d=v({},u,{},e.data),s=function(t,n){var a;return l()(e.data[t],n)&&e.state[t]?e:O(e,((a={})[t]=Array.isArray(n)?[].concat(n):n,a))};switch(n){case"init":return l()(Object.keys(d),Object.keys(e.data))?e:O(e,d);case"put":return s(a,r);case"add":return Array.isArray(i)?s(a,[].concat(i,[r])):s(a,r);case"update":if(!o)throw new Error("Filter is required for update data");if(Array.isArray(i)&&"object"===typeof r){var f=y(o);return s(a,i.map((function(e,t){return f(e,t)?(a=r,"object"===typeof(n=e)?v({},n,{},a):a):e;var n,a})))}return s(a,r);case"remove":if(!o&&!c)throw new Error("Filter is required for remove data. Unless you pass force = true");if(!Array.isArray(i)||c)return delete i[a],s(a,i);var p=y(o);return s(a,i.filter((function(e,t){return!p(e,t)})));default:throw new Error}},C=Object(a.createContext)({store:{data:{},state:{}},dispatch:function(){}});C.displayName="UnidataContext";var w=function(e){var t=e.initialData,n=e.children,o=Object(a.useReducer)(k,t,j),c=o[0],u=o[1];return r.a.createElement(C.Provider,{value:{store:c,dispatch:u}},n)},x=function(e){return function(t){var n=function(n){var o=function(e){void 0===e&&(e={});var t=Object(a.useContext)(C),n=t.dispatch,r=t.store,o=r.data,c=r.state,u={},l=d()(e,(function(e,t){return void 0!==o[t]||o[t]===e?o[t]:(u[t]=e,e)})),i={data:l,state:m()(c,Object.keys(e))},s={put:function(e,t){return n({type:"put",name:e,value:t})},add:function(e,t){return n({type:"add",name:e,value:t})},update:function(e,t,a){return n({type:"update",name:e,value:a,filter:t})},remove:function(e,t,a){return void 0===a&&(a=!1),n({type:"remove",filter:t,name:e,forced:a})}};return Object(a.useEffect)((function(){Object.keys(u)&&n({type:"init",data:u})}),[u,o,n,l]),[i,s]}(e||{}),c=o[0],u=o[1],l=v({},n),i=h()(c.state).join("-"),s=function(){return r.a.createElement(t,Object.assign({data:c.data,dispatcher:u},l))};return s.displayName=E("UnidataSubscribed",t),r.a.useMemo((function(){return r.a.createElement(s,{deps:i})}),[i])};return n.displayName=E("UnidataMemoized",t),n}},A=n(22),R=n(18),q=n(19),F=n(23),U=n(21),D=n(59),I=n.n(D),M=function(e){return function(t){e.add("logs",{content:t,id:I.a.generate()})}},N=x({logs:[]})((function(e){var t=e.data.logs;return t&&r.a.createElement("ol",null,t.map((function(e){return r.a.createElement("li",{key:e.id},e.content)})))})),T=function(e){Object(F.a)(n,e);var t=Object(U.a)(n);function n(){return Object(R.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"componentDidUpdate",value:function(){this.log=M(this.props.dispatcher)}},{key:"render",value:function(){this.log&&this.log("Rendering Todo Counter");var e=this.props.data;return r.a.createElement("span",null,"Completed: ",e.todos.filter((function(e){return e.completed})).length,"/",e.todos.length)}}]),n}(r.a.PureComponent),z=x({todos:[]})(T),P=n(20),V=n(37),_=function(e){Object(F.a)(n,e);var t=Object(U.a)(n);function n(){return Object(R.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"extractFromEvent",value:function(e){var t=e.target,n=t.value,a=t.checked;this.setValue(a?n:null)}}]),n}(P.a),G=function(){return{content:{label:"Todo Content",validators:[{test:Object(V.required)(),errorMessage:"%(label)s is required"},{test:Object(V.minlen)(6),errorMessage:"%(label)s must be longer than 6 characters"}]},completed:{label:"Completed",type:_}}},J=x()((function(e){var t=e.dispatcher,n=M(t),o=Object(a.useRef)(null),c=Object(P.b)(G),u=c.content,l=c.completed,i=function(e){c.extractFromEvent(e)};return Object(a.useEffect)((function(){n("Rendering Add Todo")})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",ref:o,onChange:i,name:u.name,value:u.value}),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",name:l.name,checked:"completed"===l.value,value:"completed",onChange:i})," ","Completed"),r.a.createElement("button",{type:"button",onClick:function(e){e.preventDefault(),c.isValid&&(t.add("todos",c.data),c.clearData())}},"Add todo"),r.a.createElement("br",null),u.isValid?null:r.a.createElement("p",null,u.error.message))})),S=n(60),B=x({todos:[]})((function(e){var t=e.data,n=e.dispatcher,o=t.todos,c=M(n),u=function(e){var t=e.target,a=t.checked,r=t.value,c=Object(S.a)(o),u=parseInt(r,10),l=o[u];c[u]=Object(A.a)({},l,{completed:a}),n.put("todos",c)};return Object(a.useEffect)((function(){c("Rendering Todo list")})),r.a.createElement("ol",null,o.map((function(e,t){return r.a.createElement("li",{key:e.content},r.a.createElement("input",{type:"checkbox",checked:e.completed,value:t,onChange:u}),e.completed?r.a.createElement("s",null,e.content):e.content)})))})),H=x({counter:0})((function(e){var t=e.data,n=e.dispatcher,o=M(n),c=Object(a.useCallback)((function(){n.put("counter",t.counter+1)}),[t.counter,n]);return Object(a.useEffect)((function(){o("Rendering Unrelated counter")})),r.a.createElement("p",null,t.counter," ",r.a.createElement("button",{type:"button",onClick:c},"+ Increase"))}));function Y(){var e={padding:"20px",flexGrow:1,width:"50%",position:"relative"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",height:"100vh",alignItems:"stretch"}},r.a.createElement("div",{style:e},r.a.createElement("a",{href:"https://github.com/you",style:{position:"absolute",right:0,top:0}},r.a.createElement("img",{width:"149",height:"149",src:"https://github.blog/wp-content/uploads/2008/12/forkme_right_darkblue_121621.png?resize=149%2C149",class:"attachment-full size-full",alt:"Fork me on GitHub","data-recalc-dims":"1"})),r.a.createElement(J,null),r.a.createElement("hr",null),r.a.createElement(z,null),r.a.createElement(H,null),r.a.createElement(B,null)),r.a.createElement("div",{style:Object(A.a)({},e,{color:"#fff",backgroundColor:"#333",overflowY:"scroll",boxShadow:"inset 0 0 20px rgba(0,0,0,.4)"})},r.a.createElement("h2",null,"Rendering logger"),r.a.createElement(N,null))))}n(177);c.a.render(r.a.createElement(w,{initialData:{logs:[]}},r.a.createElement(Y,null)),document.getElementById("root"))},61:function(e,t,n){e.exports=n(178)}},[[61,1,2]]]);
//# sourceMappingURL=main.8b126e2f.chunk.js.map